<div class="timeline-container" [class.is-collapsed]="collapsed">
  <div class="timeline-header">
    <ng-content select="[timeline-header]"></ng-content>
  </div>

  <div #body class="timeline-body" role="region" [attr.aria-hidden]="collapsed">
    <div #content class="timeline-inner">
      <ul>
        <li
          class="timeline-li"
          *ngFor="let item of timelineData; let last = last"
        >
          <div class="timeline-item">
            <div class="icon-wrapper" *ngIf="item.icon">
              <i [class]="item.icon"></i>
            </div>

            <div class="item-content">
              <header class="item-header">
                <div class="item-title">{{ getItemHeader(item) }}</div>
                <div class="item-meta">
                  <small class="item-note" *ngIf="item.note">{{
                    item.note
                  }}</small>
                  <small class="item-time" *ngIf="item.at">{{
                    item.at | date : "medium"
                  }}</small>
                </div>
              </header>

              <section class="item-body">
                <p class="body-text" *ngIf="item.body">{{ item.body }}</p>

                <div class="sources-wrapper" *ngIf="item.sources?.length">
                  <ng-container *ngFor="let source of item.sources">
                    <!-- link pill -->
                    <a
                      *ngIf="source.url; else buttonPill"
                      [href]="source.url"
                      target="_blank"
                      rel="noopener"
                      class="source-pill"
                    >
                      <i
                        [ngClass]="['pi', getSourceIcon(source)]"
                        class="source-icon"
                        aria-hidden="true"
                      ></i>
                      <span>{{ source.name }}</span>
                    </a>

                    <!-- your custom button pill (restored) -->
                    <ng-template #buttonPill>
                      <maxterdev-button
                        severity="secondary"
                        class="pill"
                        (click)="onSourceClick(source)"
                      >
                        <i
                          [ngClass]="['pi', getSourceIcon(source)]"
                          class="source-icon"
                          aria-hidden="true"
                        ></i>
                        <span>{{ source.name }}</span>
                      </maxterdev-button>
                    </ng-template>
                  </ng-container>
                </div>
              </section>
            </div>
          </div>
        </li>
      </ul>
    </div>
  </div>
</div>
